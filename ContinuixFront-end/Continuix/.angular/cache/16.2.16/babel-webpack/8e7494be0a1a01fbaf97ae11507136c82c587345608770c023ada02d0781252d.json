{"ast":null,"code":"import { IncidentType } from '../incident-type';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../alerte.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nconst _c0 = [\"editModal\"];\nfunction AlerteComponent_option_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const type_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", type_r4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(type_r4);\n  }\n}\nfunction AlerteComponent_tr_33_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\")(8, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function AlerteComponent_tr_33_Template_button_click_8_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const alerte_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.editAlerte(alerte_r5));\n    });\n    i0.ɵɵtext(9, \"Modifier\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function AlerteComponent_tr_33_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const alerte_r5 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.deleteAlerte(alerte_r5.id));\n    });\n    i0.ɵɵtext(11, \"Supprimer\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const alerte_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(alerte_r5.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(alerte_r5.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(alerte_r5.type);\n  }\n}\nfunction AlerteComponent_div_37_option_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const type_r10 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", type_r10);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(type_r10);\n  }\n}\nfunction AlerteComponent_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"div\", 23)(2, \"h5\", 24);\n    i0.ɵɵtext(3, \"Modifier Alerte\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function AlerteComponent_div_37_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.closeModal());\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 26)(6, \"form\")(7, \"div\", 5)(8, \"label\", 27);\n    i0.ɵɵtext(9, \"Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"input\", 28);\n    i0.ɵɵlistener(\"ngModelChange\", function AlerteComponent_div_37_Template_input_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.editingAlerte.description = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 5)(12, \"label\", 27);\n    i0.ɵɵtext(13, \"Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"select\", 29);\n    i0.ɵɵlistener(\"ngModelChange\", function AlerteComponent_div_37_Template_select_ngModelChange_14_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.editingAlerte.type = $event);\n    });\n    i0.ɵɵtemplate(15, AlerteComponent_div_37_option_15_Template, 2, 2, \"option\", 10);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(16, \"div\", 30)(17, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function AlerteComponent_div_37_Template_button_click_17_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.closeModal());\n    });\n    i0.ɵɵtext(18, \"Annuler\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function AlerteComponent_div_37_Template_button_click_19_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.updateAlerte());\n    });\n    i0.ɵɵtext(20, \"Enregistrer\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.editingAlerte.description);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.editingAlerte.type);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.incidentTypes);\n  }\n}\nexport let AlerteComponent = /*#__PURE__*/(() => {\n  class AlerteComponent {\n    constructor(alerteService) {\n      this.alerteService = alerteService;\n      this.alertes = [];\n      this.incidentTypes = Object.keys(IncidentType).filter(key => isNaN(+key));\n      this.newAlerte = {\n        description: '',\n        type: IncidentType.AUTHENTICATION_ISSUE\n      };\n      this.editingAlerte = null;\n    }\n    ngOnInit() {\n      this.loadAlertes();\n    }\n    loadAlertes() {\n      this.alerteService.getAllAlertes().subscribe({\n        next: data => {\n          this.alertes = data;\n        },\n        error: err => {\n          console.error('Erreur lors du chargement des alertes:', err);\n        }\n      });\n    }\n    createAlerte() {\n      this.alerteService.createAlerte(this.newAlerte).subscribe({\n        next: alerte => {\n          this.alertes.push(alerte);\n          this.newAlerte = {\n            description: '',\n            type: IncidentType.AUTHENTICATION_ISSUE\n          };\n          Swal.fire({\n            icon: 'success',\n            title: 'Alerte créée avec succès !',\n            confirmButtonText: 'OK',\n            confirmButtonColor: '#1BC5BD'\n          });\n        },\n        error: err => {\n          console.error('Erreur lors de la création:', err);\n          Swal.fire({\n            icon: 'error',\n            title: 'Erreur',\n            text: 'Impossible de créer l\\'alerte.'\n          });\n        }\n      });\n    }\n    editAlerte(alerte) {\n      this.editingAlerte = {\n        ...alerte\n      };\n      setTimeout(() => {\n        if (this.editModal?.nativeElement) {\n          this.modalInstance = new bootstrap.Modal(this.editModal.nativeElement);\n          this.modalInstance.show();\n        }\n      });\n    }\n    updateAlerte() {\n      if (this.editingAlerte && this.editingAlerte.id) {\n        this.alerteService.updateAlerte(this.editingAlerte.id, this.editingAlerte).subscribe({\n          next: () => {\n            this.loadAlertes();\n            this.closeModal();\n            Swal.fire({\n              icon: 'success',\n              title: 'Alerte modifiée avec succès !',\n              confirmButtonText: 'OK',\n              confirmButtonColor: '#1BC5BD'\n            });\n          },\n          error: err => {\n            console.error('Erreur de modification:', err);\n            Swal.fire({\n              icon: 'error',\n              title: 'Erreur',\n              text: 'Impossible de modifier l\\'alerte.'\n            });\n          }\n        });\n      }\n    }\n    deleteAlerte(id) {\n      Swal.fire({\n        title: 'Êtes-vous sûr ?',\n        text: 'Cette action est irréversible.',\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'Oui, supprimer',\n        cancelButtonText: 'Annuler',\n        confirmButtonColor: '#F64E60',\n        cancelButtonColor: '#E0E0E0'\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.alerteService.deleteAlerte(id).subscribe({\n            next: () => {\n              this.alertes = this.alertes.filter(a => a.id !== id);\n              Swal.fire({\n                icon: 'success',\n                title: 'Alerte supprimée !',\n                confirmButtonText: 'OK',\n                confirmButtonColor: '#1BC5BD'\n              });\n            },\n            error: err => {\n              console.error('Erreur de suppression:', err);\n              Swal.fire({\n                icon: 'error',\n                title: 'Erreur',\n                text: 'Impossible de supprimer l\\'alerte.'\n              });\n            }\n          });\n        }\n      });\n    }\n    closeModal() {\n      this.modalInstance?.hide();\n      this.editingAlerte = null;\n    }\n    static {\n      this.ɵfac = function AlerteComponent_Factory(t) {\n        return new (t || AlerteComponent)(i0.ɵɵdirectiveInject(i1.AlerteService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AlerteComponent,\n        selectors: [[\"app-alerte\"]],\n        viewQuery: function AlerteComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵviewQuery(_c0, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.editModal = _t.first);\n          }\n        },\n        decls: 38,\n        vars: 5,\n        consts: [[1, \"table-container\"], [1, \"card\", \"mb-4\"], [1, \"card-body\"], [1, \"card-title\"], [3, \"ngSubmit\"], [1, \"mb-3\"], [\"for\", \"description\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"description\", \"name\", \"description\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"type\", 1, \"form-label\"], [\"id\", \"type\", \"name\", \"type\", \"required\", \"\", 1, \"form-select\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [1, \"card\"], [1, \"table\", \"table-striped\"], [4, \"ngFor\", \"ngForOf\"], [\"id\", \"editAlerteModal\", \"tabindex\", \"-1\", 1, \"modal\", \"fade\"], [\"editModal\", \"\"], [1, \"modal-dialog\"], [\"class\", \"modal-content\", 4, \"ngIf\"], [3, \"value\"], [1, \"btn\", \"btn-sm\", \"btn-warning\", \"me-2\", 3, \"click\"], [1, \"btn\", \"btn-sm\", \"btn-danger\", 3, \"click\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"modal-title\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"btn-close\", 3, \"click\"], [1, \"modal-body\"], [1, \"form-label\"], [\"type\", \"text\", \"name\", \"editDescription\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"editType\", \"required\", \"\", 1, \"form-select\", 3, \"ngModel\", \"ngModelChange\"], [1, \"modal-footer\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"]],\n        template: function AlerteComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h5\", 3);\n            i0.ɵɵtext(4, \"Set Up a New Alert\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"form\", 4);\n            i0.ɵɵlistener(\"ngSubmit\", function AlerteComponent_Template_form_ngSubmit_5_listener() {\n              return ctx.createAlerte();\n            });\n            i0.ɵɵelementStart(6, \"div\", 5)(7, \"label\", 6);\n            i0.ɵɵtext(8, \"Description\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"input\", 7);\n            i0.ɵɵlistener(\"ngModelChange\", function AlerteComponent_Template_input_ngModelChange_9_listener($event) {\n              return ctx.newAlerte.description = $event;\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(10, \"div\", 5)(11, \"label\", 8);\n            i0.ɵɵtext(12, \"Type\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"select\", 9);\n            i0.ɵɵlistener(\"ngModelChange\", function AlerteComponent_Template_select_ngModelChange_13_listener($event) {\n              return ctx.newAlerte.type = $event;\n            });\n            i0.ɵɵtemplate(14, AlerteComponent_option_14_Template, 2, 2, \"option\", 10);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(15, \"button\", 11);\n            i0.ɵɵtext(16, \"create\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(17, \"div\", 12)(18, \"div\", 2)(19, \"h5\", 3);\n            i0.ɵɵtext(20, \"Alerts Dashboard\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(21, \"table\", 13)(22, \"thead\")(23, \"tr\")(24, \"th\");\n            i0.ɵɵtext(25, \"ID\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(26, \"th\");\n            i0.ɵɵtext(27, \"Description\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(28, \"th\");\n            i0.ɵɵtext(29, \"Type\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(30, \"th\");\n            i0.ɵɵtext(31, \"Actions\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(32, \"tbody\");\n            i0.ɵɵtemplate(33, AlerteComponent_tr_33_Template, 12, 3, \"tr\", 14);\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(34, \"div\", 15, 16)(36, \"div\", 17);\n            i0.ɵɵtemplate(37, AlerteComponent_div_37_Template, 21, 3, \"div\", 18);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(9);\n            i0.ɵɵproperty(\"ngModel\", ctx.newAlerte.description);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngModel\", ctx.newAlerte.type);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngForOf\", ctx.incidentTypes);\n            i0.ɵɵadvance(19);\n            i0.ɵɵproperty(\"ngForOf\", ctx.alertes);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngIf\", ctx.editingAlerte);\n          }\n        },\n        dependencies: [i2.NgForOf, i2.NgIf, i3.ɵNgNoValidate, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm],\n        styles: [\".main-content[_ngcontent-%COMP%]{margin-left:0}.content-inner[_ngcontent-%COMP%]{max-width:100%;overflow:visible;height:auto}.table-container[_ngcontent-%COMP%]{max-height:550px;overflow-y:auto;overflow-x:auto;background-color:#e1d2d2f3!important}\"]\n      });\n    }\n  }\n  return AlerteComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}