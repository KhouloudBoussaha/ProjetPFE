{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../notification.service\";\nimport * as i4 from \"@angular/common\";\nfunction SidebarComponent_div_8_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"a\", 29)(2, \"span\", 25);\n    i0.ɵɵtext(3, \"Send Notification\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"active\", ctx_r4.router.url.includes(\"/SendNotification\"));\n    i0.ɵɵproperty(\"routerLink\", \"/SendNotification\");\n  }\n}\nfunction SidebarComponent_div_8_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"a\", 29)(2, \"span\", 25);\n    i0.ɵɵtext(3, \"Notification History\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"active\", ctx_r5.router.url.includes(\"/Notification-History\"));\n    i0.ɵɵproperty(\"routerLink\", \"/Notification-History\");\n  }\n}\nfunction SidebarComponent_div_8_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"a\", 29)(2, \"span\", 25);\n    i0.ɵɵtext(3, \"Confirmation Status\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"active\", ctx_r6.router.url.includes(\"/dashboard\"));\n    i0.ɵɵproperty(\"routerLink\", \"/dashboard\");\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/notificationConsult\", a1];\n};\nfunction SidebarComponent_div_8_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"a\", 29)(2, \"span\", 25);\n    i0.ɵɵtext(3, \"Consult Notification\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"active\", ctx_r7.router.url.includes(\"/notifications/consult\"));\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(3, _c0, ctx_r7.notification.id));\n  }\n}\nfunction SidebarComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"span\", 24);\n    i0.ɵɵlistener(\"click\", function SidebarComponent_div_8_Template_span_click_1_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.isNotificationMenuOpen = !ctx_r8.isNotificationMenuOpen);\n    });\n    i0.ɵɵelementStart(2, \"span\", 25);\n    i0.ɵɵtext(3, \"Notification Management\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 26);\n    i0.ɵɵtemplate(5, SidebarComponent_div_8_div_5_Template, 4, 3, \"div\", 27);\n    i0.ɵɵtemplate(6, SidebarComponent_div_8_div_6_Template, 4, 3, \"div\", 27);\n    i0.ɵɵtemplate(7, SidebarComponent_div_8_div_7_Template, 4, 3, \"div\", 27);\n    i0.ɵɵtemplate(8, SidebarComponent_div_8_div_8_Template, 4, 5, \"div\", 27);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"show\", ctx_r0.isNotificationMenuOpen);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.displaySendNotification);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.displayNotificationHistory);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.displayConfirmationStatus);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.displayConsultNotification && ctx_r0.notification);\n  }\n}\nfunction SidebarComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"span\", 24);\n    i0.ɵɵlistener(\"click\", function SidebarComponent_div_9_Template_span_click_1_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.isUserMenuOpen = !ctx_r10.isUserMenuOpen);\n    });\n    i0.ɵɵelementStart(2, \"span\", 25);\n    i0.ɵɵtext(3, \"User Management\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 26)(5, \"div\", 28)(6, \"a\", 29)(7, \"span\", 25);\n    i0.ɵɵtext(8, \"Users Dashboard\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"div\", 28)(10, \"a\", 29)(11, \"span\", 25);\n    i0.ɵɵtext(12, \"User Overview\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"show\", ctx_r1.isUserMenuOpen);\n    i0.ɵɵadvance(6);\n    i0.ɵɵclassProp(\"active\", ctx_r1.router.url.includes(\"/list\"));\n    i0.ɵɵproperty(\"routerLink\", \"/list\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"active\", ctx_r1.router.url.includes(\"/list\"));\n    i0.ɵɵproperty(\"routerLink\", \"/dashboard\");\n  }\n}\nfunction SidebarComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"span\", 24);\n    i0.ɵɵlistener(\"click\", function SidebarComponent_div_10_Template_span_click_1_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.isPcaMenuOpen = !ctx_r12.isPcaMenuOpen);\n    });\n    i0.ɵɵelementStart(2, \"span\", 25);\n    i0.ɵɵtext(3, \"PCA Management\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 26)(5, \"div\", 28)(6, \"a\", 29)(7, \"span\", 25);\n    i0.ɵɵtext(8, \"PCA\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"show\", ctx_r2.isPcaMenuOpen);\n    i0.ɵɵadvance(6);\n    i0.ɵɵclassProp(\"active\", ctx_r2.router.url.includes(\"/PCA\"));\n    i0.ɵɵproperty(\"routerLink\", \"/PCA\");\n  }\n}\nfunction SidebarComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"span\", 24);\n    i0.ɵɵlistener(\"click\", function SidebarComponent_div_11_Template_span_click_1_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.isAlertMenuOpen = !ctx_r14.isAlertMenuOpen);\n    });\n    i0.ɵɵelementStart(2, \"span\", 25);\n    i0.ɵɵtext(3, \"Alert Management\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"div\", 26)(5, \"div\", 28)(6, \"a\", 29)(7, \"span\", 25);\n    i0.ɵɵtext(8, \"Alert\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"show\", ctx_r3.isAlertMenuOpen);\n    i0.ɵɵadvance(6);\n    i0.ɵɵclassProp(\"active\", ctx_r3.router.url.includes(\"/Alerte\"));\n    i0.ɵɵproperty(\"routerLink\", \"/alerte\");\n  }\n}\nexport class SidebarComponent {\n  constructor(authService, router, notificationService) {\n    this.authService = authService;\n    this.router = router;\n    this.notificationService = notificationService;\n    this.username = '';\n    this.role = '';\n    this.displaymenu = false;\n    this.displayNotificationManagment = false;\n    this.displayUserManagment = false;\n    this.displayPcaManagment = false;\n    this.displayAlerteManagment = false;\n    this.displaySendNotification = false;\n    this.displayNotificationHistory = false;\n    this.displayConfirmationStatus = false;\n    this.displayConsultNotification = false;\n    this.currentRole = null;\n    this.notification = null;\n    this.isNotificationMenuOpen = false;\n    this.isUserMenuOpen = false;\n    this.isPcaMenuOpen = false;\n    this.isAlertMenuOpen = false;\n  }\n  ngOnInit() {\n    const username = localStorage.getItem('username');\n    this.username = username ?? 'Utilisateur';\n    const role = localStorage.getItem('role');\n    this.role = role ?? 'role';\n    this.MenuDisplay();\n  }\n  MenuDisplay() {\n    const token = this.authService.getJwt();\n    if (token) {\n      this.currentRole = this.authService.getRole();\n      console.log(\"Role actuel:\", this.currentRole);\n      this.displayUserManagment = this.currentRole === 'Admin';\n      this.displayPcaManagment = this.currentRole === 'SECURITYAGENT';\n      this.displayAlerteManagment = this.currentRole === 'SECURITYAGENT' || this.currentRole === 'MANAGER' || this.currentRole === 'TEAMLEADER' || this.currentRole === 'COLLABORATOR';\n      // Onglet Notification Managment (général)\n      this.displayNotificationManagment = this.currentRole === 'Admin';\n      // Sous-onglets Notification Management\n      this.displaySendNotification = this.currentRole === 'Admin';\n      this.displayNotificationHistory = this.currentRole === 'Admin';\n      this.displayConfirmationStatus = this.currentRole === 'Admin';\n      this.displayConsultNotification = this.currentRole === 'SECURITYAGENT' || this.currentRole === 'TEAMLEADER' || this.currentRole === 'MANAGER' || this.currentRole === 'COLLABORATOR';\n    }\n  }\n  logout() {\n    this.authService.logout();\n    this.router.navigate(['/login']);\n  }\n  isActive(paths) {\n    return paths.some(p => this.router.url.includes(p));\n  }\n  static {\n    this.ɵfac = function SidebarComponent_Factory(t) {\n      return new (t || SidebarComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.NotificationService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: SidebarComponent,\n      selectors: [[\"app-sidebar\"]],\n      decls: 35,\n      vars: 7,\n      consts: [[\"id\", \"kt_app_sidebar\", \"data-kt-drawer\", \"false\", \"data-kt-drawer-name\", \"app-sidebar\", \"data-kt-drawer-activate\", \"{default: true, lg: false}\", \"data-kt-drawer-overlay\", \"true\", \"data-kt-drawer-width\", \"250px\", \"data-kt-drawer-direction\", \"start\", 1, \"app-sidebar\", \"d-flex\", \"flex-column\", 2, \"height\", \"100vh\"], [\"id\", \"kt_app_sidebar_logo\", 1, \"app-sidebar-logo\", \"d-none\", \"d-lg-flex\", \"flex-stack\", \"flex-shrink-0\", \"px-8\"], [\"href\", \"../../../index.html\"], [\"alt\", \"Logo\", \"src\", \"assets/images/f705b9857587fd6soprasteria_soprahr_rvb-Photoroom1.png\", 1, \"theme-light-show\", \"h-80px\"], [1, \"ms-5\"], [1, \"separator\", \"d-none\", \"d-lg-block\"], [\"id\", \"kt_app_sidebar_menu_wrapper\", \"data-kt-scroll\", \"true\", \"data-kt-scroll-height\", \"auto\", \"data-kt-scroll-dependencies\", \"#kt_app_sidebar_logo\", \"data-kt-scroll-offset\", \"0\", 1, \"app-sidebar-menu\", \"hover-scroll-y\", \"my-5\", \"mx-3\", \"flex-grow-1\", 2, \"overflow-y\", \"auto\"], [\"id\", \"#kt_sidebar_menu\", \"data-kt-menu\", \"true\", 1, \"menu\", \"menu-column\", \"menu-sub-indention\", \"menu-active-bg\", \"fw-semibold\"], [\"data-kt-menu-trigger\", \"click\", \"class\", \"menu-item menu-accordion\", 3, \"show\", 4, \"ngIf\"], [1, \"app-sidebar-footer\", \"p-3\", \"border-top\"], [1, \"d-flex\", \"align-items-center\", \"gap-3\", \"bg-light\", \"rounded\", \"shadow-sm\", \"p-3\"], [1, \"avatar\", \"bg-primary\", \"text-white\", \"rounded-circle\", \"d-flex\", \"justify-content-center\", \"align-items-center\", 2, \"width\", \"40px\", \"height\", \"40px\", \"font-weight\", \"700\", \"font-size\", \"1.2rem\"], [1, \"user-info\", \"flex-grow-1\"], [\"href\", \"#\", 1, \"d-block\", \"text-dark\", \"fw-bold\", \"text-decoration-none\", \"mb-1\", \"user-name-hover\"], [1, \"text-muted\"], [1, \"btn\", \"btn-outline-danger\", \"btn-sm\", 3, \"click\"], [1, \"bi\", \"bi-box-arrow-right\"], [1, \"btn\", \"btn-sm\", \"btn-danger\", \"w-100\", \"mt-3\", 3, \"click\"], [1, \"dashboard-header\", \"flex\", \"justify-between\", \"items-center\", \"px-8\", \"py-4\", \"shadow\", \"fixed\", \"top-0\", \"left-0\", \"right-0\", \"z-50\", 2, \"left\", \"300px\", \"background-color\", \"#f8f9fa\"], [1, \"text-2xl\", \"font-bold\"], [1, \"text-gray-600\"], [1, \"bg-blue-500\", \"text-white\", \"px-4\", \"py-2\", \"rounded\", \"hover:bg-blue-600\"], [1, \"main-content\", 2, \"margin-left\", \"300px\", \"padding-top\", \"90px\"], [\"data-kt-menu-trigger\", \"click\", 1, \"menu-item\", \"menu-accordion\"], [1, \"menu-link\", 3, \"click\"], [1, \"menu-title\"], [1, \"menu-sub\", \"menu-sub-accordion\"], [\"class\", \"menu-item\", 4, \"ngIf\"], [1, \"menu-item\"], [1, \"menu-link\", 3, \"routerLink\"]],\n      template: function SidebarComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"a\", 2);\n          i0.ɵɵelement(3, \"img\", 3);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(4, \"div\", 4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(5, \"div\", 5);\n          i0.ɵɵelementStart(6, \"div\", 6)(7, \"div\", 7);\n          i0.ɵɵtemplate(8, SidebarComponent_div_8_Template, 9, 6, \"div\", 8);\n          i0.ɵɵtemplate(9, SidebarComponent_div_9_Template, 13, 8, \"div\", 8);\n          i0.ɵɵtemplate(10, SidebarComponent_div_10_Template, 9, 5, \"div\", 8);\n          i0.ɵɵtemplate(11, SidebarComponent_div_11_Template, 9, 5, \"div\", 8);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(12, \"div\", 9)(13, \"div\", 10)(14, \"div\", 11);\n          i0.ɵɵtext(15);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(16, \"div\", 12)(17, \"a\", 13);\n          i0.ɵɵtext(18);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"small\", 14);\n          i0.ɵɵtext(20);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(21, \"button\", 15);\n          i0.ɵɵlistener(\"click\", function SidebarComponent_Template_button_click_21_listener() {\n            return ctx.logout();\n          });\n          i0.ɵɵelement(22, \"i\", 16);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(23, \"button\", 17);\n          i0.ɵɵlistener(\"click\", function SidebarComponent_Template_button_click_23_listener() {\n            return ctx.logout();\n          });\n          i0.ɵɵtext(24, \" D\\u00E9connexion \");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(25, \"header\", 18)(26, \"div\")(27, \"h1\", 19);\n          i0.ɵɵtext(28, \"Tableau de bord - Admin PCA\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(29, \"p\", 20);\n          i0.ɵɵtext(30, \"Bienvenue, Admin\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(31, \"button\", 21);\n          i0.ɵɵtext(32, \" Profil / Param\\u00E8tres \");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(33, \"div\", 22);\n          i0.ɵɵelement(34, \"router-outlet\");\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          let tmp_4_0;\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngIf\", ctx.displayNotificationManagment);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.displayUserManagment);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.displayPcaManagment);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ctx.displayAlerteManagment);\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate1(\" \", ((tmp_4_0 = ctx.username == null ? null : ctx.username.charAt(0)) !== null && tmp_4_0 !== undefined ? tmp_4_0 : \"U\").toUpperCase(), \" \");\n          i0.ɵɵadvance(3);\n          i0.ɵɵtextInterpolate1(\" \", ctx.username || \"Utilisateur\", \" \");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(ctx.role || \"R\\u00F4le inconnu\");\n        }\n      },\n      dependencies: [i4.NgIf, i2.RouterOutlet, i2.RouterLink],\n      styles: [\"\\n\\n.app-sidebar[_ngcontent-%COMP%] {\\n  width: 300px;\\n  position: fixed;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  background-color: #f8f9fa;\\n  z-index: 1050;\\n  display: flex;\\n  flex-direction: column;\\n  height: 100vh;\\n    filter: none !important;\\n}\\n\\n.flex-grow-1[_ngcontent-%COMP%] {\\n  flex-grow: 1;\\n  overflow-y: auto; \\n\\n}\\n\\n.user-block[_ngcontent-%COMP%] {\\n  background: #f8f9fa; \\n\\n}\\n\\n\\n\\n.menu-item[_ngcontent-%COMP%] {\\n  margin: 10px 0;\\n  padding: 5px 15px;\\n  color: #333;\\n  font-family: Arial, sans-serif;\\n  font-size: 16px;\\n}\\n\\n.menu-item[_ngcontent-%COMP%]:hover {\\n  background-color: #f5f5f5;\\n  cursor: pointer;\\n}\\n\\n.selected[_ngcontent-%COMP%] {\\n  background-color: #e0f7fa;\\n  color: #db0902;\\n}\\n\\n\\n\\n.main-content[_ngcontent-%COMP%] {\\n  margin-left: 300px; \\n\\n}\\n\\n\\n\"]\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}