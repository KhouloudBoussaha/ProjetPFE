{"ast":null,"code":"import { IncidentType } from '../incident-type';\nimport { Impact } from '../impact';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../pca.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction SimulatePcaComponent_option_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const type_r10 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", type_r10);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(type_r10);\n  }\n}\nfunction SimulatePcaComponent_p_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 20);\n    i0.ɵɵtext(1, \" Ce champ est requis \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SimulatePcaComponent_option_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const impact_r11 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", impact_r11);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(impact_r11);\n  }\n}\nfunction SimulatePcaComponent_p_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 20);\n    i0.ɵɵtext(1, \" Ce champ est requis \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SimulatePcaComponent_option_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const groupe_r12 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", groupe_r12.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(groupe_r12.name);\n  }\n}\nfunction SimulatePcaComponent_p_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 20);\n    i0.ɵɵtext(1, \" Ce champ est requis \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SimulatePcaComponent_ng_container_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 21);\n    i0.ɵɵelement(2, \"path\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Lancer la simulation \");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction SimulatePcaComponent_ng_template_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 23);\n    i0.ɵɵelement(1, \"circle\", 24)(2, \"path\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Chargement... \");\n  }\n}\nfunction SimulatePcaComponent_p_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r9.submissionMessage, \" \");\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"border-red-500\": a0\n  };\n};\nexport class SimulatePcaComponent {\n  constructor(pcaService) {\n    this.pcaService = pcaService;\n    this.incidentType = IncidentType.AUTHENTICATION_ISSUE; // valeur par défaut\n    this.impact = Impact.LOW; // valeur par défaut\n    this.commentaire = '';\n    this.message = '';\n    this.errorMessage = '';\n    this.incidentTypes = Object.values(IncidentType);\n    this.impacts = Object.values(Impact);\n  }\n  onSubmit() {\n    const request = {\n      incidentType: this.incidentType,\n      impact: this.impact,\n      groupeId: this.groupeId,\n      commentaire: this.commentaire\n    };\n    this.pcaService.simulatePca(request).subscribe({\n      next: res => {\n        this.message = res;\n        this.errorMessage = '';\n      },\n      error: err => {\n        this.errorMessage = err.error || 'Erreur serveur';\n        this.message = '';\n      }\n    });\n  }\n  static {\n    this.ɵfac = function SimulatePcaComponent_Factory(t) {\n      return new (t || SimulatePcaComponent)(i0.ɵɵdirectiveInject(i1.PcaService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: SimulatePcaComponent,\n      selectors: [[\"app-simulate-pca\"]],\n      decls: 43,\n      vars: 20,\n      consts: [[1, \"max-w-lg\", \"mx-auto\", \"p-8\", \"bg-white\", \"rounded-xl\", \"shadow-lg\", \"space-y-6\"], [1, \"text-3xl\", \"font-extrabold\", \"text-center\", \"text-indigo-600\"], [\"novalidate\", \"\", 1, \"space-y-6\", 3, \"formGroup\", \"ngSubmit\"], [\"for\", \"incidentType\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\", \"mb-1\"], [1, \"text-red-500\"], [\"id\", \"incidentType\", \"formControlName\", \"incidentType\", 1, \"block\", \"w-full\", \"rounded-md\", \"border\", \"border-gray-300\", \"py-2\", \"px-3\", \"shadow-sm\", \"focus:outline-none\", \"focus:ring-indigo-500\", \"focus:border-indigo-500\", 3, \"ngClass\"], [\"value\", \"\", \"disabled\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"text-red-500 text-sm mt-1\", 4, \"ngIf\"], [\"for\", \"impact\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\", \"mb-1\"], [\"id\", \"impact\", \"formControlName\", \"impact\", 1, \"block\", \"w-full\", \"rounded-md\", \"border\", \"border-gray-300\", \"py-2\", \"px-3\", \"shadow-sm\", \"focus:outline-none\", \"focus:ring-indigo-500\", \"focus:border-indigo-500\", 3, \"ngClass\"], [\"for\", \"groupeId\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\", \"mb-1\"], [\"id\", \"groupeId\", \"formControlName\", \"groupeId\", 1, \"block\", \"w-full\", \"rounded-md\", \"border\", \"border-gray-300\", \"py-2\", \"px-3\", \"shadow-sm\", \"focus:outline-none\", \"focus:ring-indigo-500\", \"focus:border-indigo-500\", 3, \"ngClass\"], [\"for\", \"commentaire\", 1, \"block\", \"text-sm\", \"font-medium\", \"text-gray-700\", \"mb-1\"], [\"id\", \"commentaire\", \"formControlName\", \"commentaire\", \"rows\", \"3\", \"placeholder\", \"Ajouter un commentaire...\", 1, \"block\", \"w-full\", \"rounded-md\", \"border\", \"border-gray-300\", \"py-2\", \"px-3\", \"shadow-sm\", \"focus:outline-none\", \"focus:ring-indigo-500\", \"focus:border-indigo-500\", \"resize-none\"], [\"type\", \"submit\", 1, \"w-full\", \"py-3\", \"bg-indigo-600\", \"text-white\", \"font-semibold\", \"rounded-lg\", \"shadow-md\", \"hover:bg-indigo-700\", \"transition-colors\", \"duration-300\", \"focus:outline-none\", \"focus:ring-2\", \"focus:ring-indigo-500\", \"focus:ring-offset-2\", 3, \"disabled\"], [4, \"ngIf\", \"ngIfElse\"], [\"loading\", \"\"], [\"class\", \"mt-4 text-center text-green-600 font-semibold\", 4, \"ngIf\"], [3, \"value\"], [1, \"text-red-500\", \"text-sm\", \"mt-1\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"viewBox\", \"0 0 24 24\", \"xmlns\", \"http://www.w3.org/2000/svg\", \"aria-hidden\", \"true\", 1, \"inline-block\", \"w-5\", \"h-5\", \"mr-2\", \"-mt-1\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M14.752 11.168l-6.518-3.76A.75.75 0 007 8.375v7.25a.75.75 0 001.234.628l6.518-4.386a.75.75 0 000-1.299z\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"fill\", \"none\", \"viewBox\", \"0 0 24 24\", 1, \"animate-spin\", \"h-5\", \"w-5\", \"mr-2\", \"text-white\", \"inline-block\"], [\"cx\", \"12\", \"cy\", \"12\", \"r\", \"10\", \"stroke\", \"currentColor\", \"stroke-width\", \"4\", 1, \"opacity-25\"], [\"fill\", \"currentColor\", \"d\", \"M4 12a8 8 0 018-8v8z\", 1, \"opacity-75\"], [1, \"mt-4\", \"text-center\", \"text-green-600\", \"font-semibold\"]],\n      template: function SimulatePcaComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\", 1);\n          i0.ɵɵtext(2, \" \\uD83D\\uDEA8 Lancer une simulation PCA \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"form\", 2);\n          i0.ɵɵlistener(\"ngSubmit\", function SimulatePcaComponent_Template_form_ngSubmit_3_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(4, \"div\")(5, \"label\", 3);\n          i0.ɵɵtext(6, \" Type d'incident \");\n          i0.ɵɵelementStart(7, \"span\", 4);\n          i0.ɵɵtext(8, \"*\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(9, \"select\", 5)(10, \"option\", 6);\n          i0.ɵɵtext(11, \"-- S\\u00E9lectionner --\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(12, SimulatePcaComponent_option_12_Template, 2, 2, \"option\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(13, SimulatePcaComponent_p_13_Template, 2, 0, \"p\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"div\")(15, \"label\", 9);\n          i0.ɵɵtext(16, \" Impact \");\n          i0.ɵɵelementStart(17, \"span\", 4);\n          i0.ɵɵtext(18, \"*\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(19, \"select\", 10)(20, \"option\", 6);\n          i0.ɵɵtext(21, \"-- S\\u00E9lectionner --\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(22, SimulatePcaComponent_option_22_Template, 2, 2, \"option\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(23, SimulatePcaComponent_p_23_Template, 2, 0, \"p\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"div\")(25, \"label\", 11);\n          i0.ɵɵtext(26, \" Groupe concern\\u00E9 \");\n          i0.ɵɵelementStart(27, \"span\", 4);\n          i0.ɵɵtext(28, \"*\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(29, \"select\", 12)(30, \"option\", 6);\n          i0.ɵɵtext(31, \"-- S\\u00E9lectionner --\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(32, SimulatePcaComponent_option_32_Template, 2, 2, \"option\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(33, SimulatePcaComponent_p_33_Template, 2, 0, \"p\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(34, \"div\")(35, \"label\", 13);\n          i0.ɵɵtext(36, \" Commentaire (optionnel) \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(37, \"textarea\", 14);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(38, \"button\", 15);\n          i0.ɵɵtemplate(39, SimulatePcaComponent_ng_container_39_Template, 4, 0, \"ng-container\", 16);\n          i0.ɵɵtemplate(40, SimulatePcaComponent_ng_template_40_Template, 4, 0, \"ng-template\", null, 17, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(42, SimulatePcaComponent_p_42_Template, 2, 1, \"p\", 18);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          const _r7 = i0.ɵɵreference(41);\n          let tmp_1_0;\n          let tmp_3_0;\n          let tmp_4_0;\n          let tmp_6_0;\n          let tmp_7_0;\n          let tmp_9_0;\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"formGroup\", ctx.simulateForm);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(14, _c0, ((tmp_1_0 = ctx.simulateForm.get(\"incidentType\")) == null ? null : tmp_1_0.invalid) && ((tmp_1_0 = ctx.simulateForm.get(\"incidentType\")) == null ? null : tmp_1_0.touched)));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.incidentTypes);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx.simulateForm.get(\"incidentType\")) == null ? null : tmp_3_0.invalid) && ((tmp_3_0 = ctx.simulateForm.get(\"incidentType\")) == null ? null : tmp_3_0.touched));\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(16, _c0, ((tmp_4_0 = ctx.simulateForm.get(\"impact\")) == null ? null : tmp_4_0.invalid) && ((tmp_4_0 = ctx.simulateForm.get(\"impact\")) == null ? null : tmp_4_0.touched)));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.impacts);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_6_0 = ctx.simulateForm.get(\"impact\")) == null ? null : tmp_6_0.invalid) && ((tmp_6_0 = ctx.simulateForm.get(\"impact\")) == null ? null : tmp_6_0.touched));\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(18, _c0, ((tmp_7_0 = ctx.simulateForm.get(\"groupeId\")) == null ? null : tmp_7_0.invalid) && ((tmp_7_0 = ctx.simulateForm.get(\"groupeId\")) == null ? null : tmp_7_0.touched)));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.groupes);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_9_0 = ctx.simulateForm.get(\"groupeId\")) == null ? null : tmp_9_0.invalid) && ((tmp_9_0 = ctx.simulateForm.get(\"groupeId\")) == null ? null : tmp_9_0.touched));\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"disabled\", ctx.isSubmitting || ctx.simulateForm.invalid);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.isSubmitting)(\"ngIfElse\", _r7);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.submissionMessage);\n        }\n      },\n      dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf, i3.ɵNgNoValidate, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName],\n      styles: [\".simulate-pca-container[_ngcontent-%COMP%] {\\n  max-width: 450px;\\n  margin: 2rem auto;\\n  padding: 1.5rem 2rem;\\n  background: white;\\n  border-radius: 12px;\\n  box-shadow: 0 12px 25px rgba(0, 0, 0, 0.1);\\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\\n}\\n\\n.title[_ngcontent-%COMP%] {\\n  text-align: center;\\n  margin-bottom: 1.5rem;\\n  font-weight: 700;\\n  font-size: 1.8rem;\\n  color: #1976d2;\\n}\\n\\n.form[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 1rem;\\n}\\n\\n.full-width[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n\\n.submit-btn[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  gap: 0.6rem;\\n  font-weight: 600;\\n  font-size: 1rem;\\n  padding: 0.6rem;\\n  border-radius: 8px;\\n  transition: background-color 0.3s ease;\\n}\\n\\n.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled) {\\n  background-color: #004ba0;\\n}\\n\\n.message[_ngcontent-%COMP%] {\\n  margin-top: 1rem;\\n  font-weight: 700;\\n  text-align: center;\\n  color: #2e7d32;\\n  -webkit-user-select: none;\\n          user-select: none;\\n}\"]\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}