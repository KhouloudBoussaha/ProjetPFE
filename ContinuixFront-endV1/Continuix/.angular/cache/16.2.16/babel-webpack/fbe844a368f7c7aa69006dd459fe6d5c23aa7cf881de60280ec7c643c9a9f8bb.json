{"ast":null,"code":"import Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../pca.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nconst _c0 = [\"editModal\"];\nfunction PCAComponent_tr_44_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\")(12, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function PCAComponent_tr_44_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const pca_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.editPCA(pca_r3));\n    });\n    i0.ɵɵtext(13, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function PCAComponent_tr_44_Template_button_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const pca_r3 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.deletePCA(pca_r3.id));\n    });\n    i0.ɵɵtext(15, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const pca_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pca_r3.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pca_r3.incidentType);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pca_r3.impact);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pca_r3.recommendedAction);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(pca_r3.additionalDetails);\n  }\n}\nfunction PCAComponent_div_48_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"div\", 26)(2, \"h5\", 27);\n    i0.ɵɵtext(3, \"Edit PCA\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function PCAComponent_div_48_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.closeModal());\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 29)(6, \"form\")(7, \"div\", 5)(8, \"label\", 30);\n    i0.ɵɵtext(9, \"Incident Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"input\", 31);\n    i0.ɵɵlistener(\"ngModelChange\", function PCAComponent_div_48_Template_input_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.editingPCA.incidentType = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 5)(12, \"label\", 30);\n    i0.ɵɵtext(13, \"Impact\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"input\", 32);\n    i0.ɵɵlistener(\"ngModelChange\", function PCAComponent_div_48_Template_input_ngModelChange_14_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.editingPCA.impact = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"div\", 5)(16, \"label\", 30);\n    i0.ɵɵtext(17, \"Recommended Action\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"input\", 33);\n    i0.ɵɵlistener(\"ngModelChange\", function PCAComponent_div_48_Template_input_ngModelChange_18_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.editingPCA.recommendedAction = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"div\", 5)(20, \"label\", 30);\n    i0.ɵɵtext(21, \"Additional Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"textarea\", 34);\n    i0.ɵɵlistener(\"ngModelChange\", function PCAComponent_div_48_Template_textarea_ngModelChange_22_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.editingPCA.additionalDetails = $event);\n    });\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(23, \"div\", 35)(24, \"button\", 36);\n    i0.ɵɵlistener(\"click\", function PCAComponent_div_48_Template_button_click_24_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.closeModal());\n    });\n    i0.ɵɵtext(25, \"Cancel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"button\", 37);\n    i0.ɵɵlistener(\"click\", function PCAComponent_div_48_Template_button_click_26_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.updatePCA());\n    });\n    i0.ɵɵtext(27, \"Save\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.editingPCA.incidentType);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.editingPCA.impact);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.editingPCA.recommendedAction);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.editingPCA.additionalDetails);\n  }\n}\nexport class PCAComponent {\n  constructor(pcaService) {\n    this.pcaService = pcaService;\n    this.pcas = [];\n    this.newPCA = {\n      incidentType: '',\n      impact: '',\n      recommendedAction: '',\n      additionalDetails: '',\n      label: ''\n    };\n    this.editingPCA = null;\n  }\n  ngOnInit() {\n    this.loadPCAs();\n  }\n  loadPCAs() {\n    this.pcaService.getAllPCAs().subscribe({\n      next: data => {\n        this.pcas = data;\n      },\n      error: err => {\n        console.error('Erreur lors du chargement des PCA:', err);\n      }\n    });\n  }\n  createPCA() {\n    this.pcaService.addPCA(this.newPCA).subscribe({\n      next: pca => {\n        this.pcas.push(pca);\n        this.newPCA = {\n          incidentType: '',\n          impact: '',\n          recommendedAction: '',\n          additionalDetails: '',\n          label: ''\n        };\n        Swal.fire('Success', 'PCA created successfully!', 'success');\n      },\n      error: err => {\n        console.error('Erreur de création:', err);\n        Swal.fire('Error', 'Failed to create PCA.', 'error');\n      }\n    });\n  }\n  editPCA(pca) {\n    this.editingPCA = {\n      ...pca\n    };\n    setTimeout(() => {\n      this.modalInstance = new bootstrap.Modal(this.editModal.nativeElement);\n      this.modalInstance.show();\n    });\n  }\n  updatePCA() {\n    if (this.editingPCA?.id) {\n      this.pcaService.updatePCA(this.editingPCA.id, this.editingPCA).subscribe({\n        next: () => {\n          this.loadPCAs();\n          this.closeModal();\n          Swal.fire('Success', 'PCA updated successfully!', 'success');\n        },\n        error: err => {\n          console.error('Erreur de modification:', err);\n          Swal.fire('Error', 'Failed to update PCA.', 'error');\n        }\n      });\n    }\n  }\n  deletePCA(id) {\n    Swal.fire({\n      title: 'Are you sure? ?',\n      text: 'This action cannot be undone.',\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonText: 'Yes, delete it',\n      cancelButtonText: 'Cancel'\n    }).then(result => {\n      if (result.isConfirmed) {\n        this.pcaService.deletePCA(id).subscribe({\n          next: () => {\n            this.pcas = this.pcas.filter(p => p.id !== id);\n            Swal.fire('Deleted', 'PCA has been deleted.', 'success');\n          },\n          error: err => {\n            console.error('Erreur de suppression:', err);\n            Swal.fire('Erreur', 'Impossible de supprimer la PCA.', 'error');\n          }\n        });\n      }\n    });\n  }\n  closeModal() {\n    this.modalInstance?.hide();\n    this.editingPCA = null;\n  }\n  static {\n    this.ɵfac = function PCAComponent_Factory(t) {\n      return new (t || PCAComponent)(i0.ɵɵdirectiveInject(i1.PcaService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PCAComponent,\n      selectors: [[\"app-pca\"]],\n      viewQuery: function PCAComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.editModal = _t.first);\n        }\n      },\n      decls: 49,\n      vars: 6,\n      consts: [[1, \"table-container\"], [1, \"card\", \"mb-4\"], [1, \"card-body\"], [1, \"card-title\", \"alert-title\"], [3, \"ngSubmit\"], [1, \"mb-3\"], [\"for\", \"incidentType\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"incidentType\", \"name\", \"incidentType\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"impact\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"impact\", \"name\", \"impact\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"recommendedAction\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"recommendedAction\", \"name\", \"recommendedAction\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"additionalDetails\", 1, \"form-label\"], [\"id\", \"additionalDetails\", \"name\", \"additionalDetails\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [1, \"card\"], [1, \"card-title\"], [1, \"table\", \"table-striped\"], [4, \"ngFor\", \"ngForOf\"], [\"id\", \"editPCAModal\", \"tabindex\", \"-1\", 1, \"modal\", \"fade\"], [\"editModal\", \"\"], [1, \"modal-dialog\"], [\"class\", \"modal-content\", 4, \"ngIf\"], [1, \"btn\", \"btn-sm\", \"btn-warning\", \"me-2\", 3, \"click\"], [1, \"btn\", \"btn-sm\", \"btn-danger\", 3, \"click\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"modal-title\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"btn-close\", 3, \"click\"], [1, \"modal-body\"], [1, \"form-label\"], [\"type\", \"text\", \"name\", \"editIncidentType\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"editImpact\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"name\", \"editRecommendedAction\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"editAdditionalDetails\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"modal-footer\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"]],\n      template: function PCAComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h5\", 3);\n          i0.ɵɵtext(4, \"Set Up a New PCA\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"form\", 4);\n          i0.ɵɵlistener(\"ngSubmit\", function PCAComponent_Template_form_ngSubmit_5_listener() {\n            return ctx.createPCA();\n          });\n          i0.ɵɵelementStart(6, \"div\", 5)(7, \"label\", 6);\n          i0.ɵɵtext(8, \"Incident Type\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"input\", 7);\n          i0.ɵɵlistener(\"ngModelChange\", function PCAComponent_Template_input_ngModelChange_9_listener($event) {\n            return ctx.newPCA.incidentType = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(10, \"div\", 5)(11, \"label\", 8);\n          i0.ɵɵtext(12, \"Impact\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"input\", 9);\n          i0.ɵɵlistener(\"ngModelChange\", function PCAComponent_Template_input_ngModelChange_13_listener($event) {\n            return ctx.newPCA.impact = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(14, \"div\", 5)(15, \"label\", 10);\n          i0.ɵɵtext(16, \"Recommended Action\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"input\", 11);\n          i0.ɵɵlistener(\"ngModelChange\", function PCAComponent_Template_input_ngModelChange_17_listener($event) {\n            return ctx.newPCA.recommendedAction = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(18, \"div\", 5)(19, \"label\", 12);\n          i0.ɵɵtext(20, \"Additional Details\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"textarea\", 13);\n          i0.ɵɵlistener(\"ngModelChange\", function PCAComponent_Template_textarea_ngModelChange_21_listener($event) {\n            return ctx.newPCA.additionalDetails = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(22, \"button\", 14);\n          i0.ɵɵtext(23, \"Create\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(24, \"div\", 15)(25, \"div\", 2)(26, \"h5\", 16);\n          i0.ɵɵtext(27, \"PCA List\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(28, \"table\", 17)(29, \"thead\")(30, \"tr\")(31, \"th\");\n          i0.ɵɵtext(32, \"ID\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(33, \"th\");\n          i0.ɵɵtext(34, \"Incident Type\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(35, \"th\");\n          i0.ɵɵtext(36, \"Impact\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(37, \"th\");\n          i0.ɵɵtext(38, \"Recommended Action\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(39, \"th\");\n          i0.ɵɵtext(40, \"Details\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(41, \"th\");\n          i0.ɵɵtext(42, \"Actions\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(43, \"tbody\");\n          i0.ɵɵtemplate(44, PCAComponent_tr_44_Template, 16, 5, \"tr\", 18);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(45, \"div\", 19, 20)(47, \"div\", 21);\n          i0.ɵɵtemplate(48, PCAComponent_div_48_Template, 28, 4, \"div\", 22);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"ngModel\", ctx.newPCA.incidentType);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.newPCA.impact);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.newPCA.recommendedAction);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.newPCA.additionalDetails);\n          i0.ɵɵadvance(23);\n          i0.ɵɵproperty(\"ngForOf\", ctx.pcas);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngIf\", ctx.editingPCA);\n        }\n      },\n      dependencies: [i2.NgForOf, i2.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm],\n      styles: [\".main-content[_ngcontent-%COMP%] {\\n  \\n\\n  margin-left: 0;\\n}\\n.alert-title[_ngcontent-%COMP%] {\\n  color: red;\\n  font-size: 2rem;       \\n\\n  font-weight: bold;\\n  text-align: center;\\n  margin-bottom: 0.5rem; \\n\\n}\\n.content-inner[_ngcontent-%COMP%] {\\n  max-width: 100%;\\n  overflow: visible;\\n  height: auto;\\n}\\n.table-container[_ngcontent-%COMP%] {\\n  background-color: rgba(255, 255, 255, 0.9);\\n  padding: 0.5rem;\\n  border-radius: 12px;\\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);\\n;\\n  \\n\\n  color: black !important;\\n}\"]\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}